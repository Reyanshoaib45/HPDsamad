<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="title" content="Happy Birthday Website 2.0 | Aoudumber Bade" />
    <meta name="github" content="https://github.com/Aoudumber-Bade" />
    <title>Kiran's Birthday</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;700&family=Poppins:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>
  </head>

  <body>
    <div id="wrapper">
      <div id="confetti"></div>
      <div class="flag__birthday">
        <img src="./images/1.png" alt="" width="350" class="flag__left" />
        <img src="./images/1.png" alt="" width="350" class="flag__right" />
      </div>
      <div class="content">
        <div class="left">
          <div class="title">
            <h1 class="happy">
              <span style="--t: 4s">H</span>
              <span style="--t: 4.2s">a</span>
              <span style="--t: 4.4s">p</span>
              <span style="--t: 4.6s">p</span>
              <span style="--t: 4.8s">y</span>
            </h1>
            <h1 class="birthday">
              <span style="--t: 5s">B</span>
              <span style="--t: 5.2s">i</span>
              <span style="--t: 5.4s">r</span>
              <span style="--t: 5.6s">t</span>
              <span style="--t: 5.8s">h</span>
              <span style="--t: 6s">d</span>
              <span style="--t: 6.2s">a</span>
              <span style="--t: 6.4s">y</span>
            </h1>
            <p class="birthday">
              <span style="--t: 5s">T</span>
              <span style="--t: 5.2s">o</span>
              <span style="--t: 5.4s"> </span>
              <span style="--t: 5.6s">K</span>
              <span style="--t: 5.8s">i</span>
              <span style="--t: 6s">r</span>
              <span style="--t: 6.2s">a</span>
              <span style="--t: 6.4s">n</span>
            </p>
            <div class="hat">
              <img src="./images/hat.png" alt="" width="130" />
            </div>
          </div>
          <div class="date__of__birth">
            <span></span>
          </div>
          <div class="btn">
            <button id="btn__letter">
              <div class="mail">
                Open Birthday Letter for Kiran
                <i class="fa-regular fa-envelope"></i>
              </div>
            </button>
          </div>
        </div>
        <div class="right">
          <div class="box__account">
            <div class="image">
              <img id="profileImage" src="https://namewishes.com/images/styles/happy-birthday-girls-cake-with-name-and-photo-edit-online-free_141f.jpg" alt="Kiran profile" />
            </div>
            <div class="name">
              <i class="fa-solid fa-heart"></i>
              <span>Dear Kiran</span>
              <i class="fa-solid fa-heart"></i>
            </div>
            <div class="balloon_one">
              <img width="100px" src="./images/balloon1.png" alt="" />
            </div>
            <div class="balloon_two">
              <img width="100px" src="./images/balloon2.png" alt="" />
            </div>
          </div>
          <div class="cricle">
            <div class="text__cricle">
              <span style="--i: 1">h</span>
              <span style="--i: 2">a</span>
              <span style="--i: 3">p</span>
              <span style="--i: 4">p</span>
              <span style="--i: 5">y</span>
              <span style="--i: 6">-</span>
              <span style="--i: 7">b</span>
              <span style="--i: 8">i</span>
              <span style="--i: 9">r</span>
              <span style="--i: 10">t</span>
              <span style="--i: 11">h</span>
              <span style="--i: 12">d</span>
              <span style="--i: 13">a</span>
              <span style="--i: 14">y</span>
              <span style="--i: 15">-</span>
            </div>
            <i class="fa-solid fa-heart"></i>
          </div>
        </div>
      </div>
      <div class="decorate_star star1" style="--t: 15s"></div>
      <div class="decorate_star star2" style="--t: 15.2s"></div>
      <div class="decorate_star star3" style="--t: 15.4s"></div>
      <div class="decorate_star star4" style="--t: 15.6s"></div>
      <div class="decorate_star star5" style="--t: 15.8s"></div>
      <div class="decorate_flower--one" style="--t: 15s">
        <img width="20" src="./images/decorate_flower.png" alt="" />
      </div>
      <div class="decorate_flower--two" style="--t: 15.3s">
        <img width="20" src="./images/decorate_flower.png" alt="" />
      </div>
      <div class="decorate_flower--three" style="--t: 15.6s">
        <img width="20" src="./images/decorate_flower.png" alt="" />
      </div>
      <div class="decorate_bottom">
        <img src="./images/decorate.png" alt="" width="100" />
      </div>
      <div class="smiley__icon">
        <img src="./images/smiley_icon.png" alt="" width="100" />
      </div>

      <button id="audioToggle" aria-label="Toggle birthday music">
        <i class="fa-solid fa-music"></i>
        <span>Play Music</span>
      </button>
      <audio id="bgm" src="https://upload.wikimedia.org/wikipedia/commons/2/25/Happy_Birthday_to_You_piano.ogg" preload="auto" loop autoplay></audio>

      <div class="boxMail">
        <i class="fa-solid fa-xmark"></i>
        <div class="boxMail-container">
          <div class="card1">
            <div class="userImg">
              <img id="modalUserImg" src="https://namewishes.com/images/styles/happy-birthday-girls-cake-with-name-and-photo-edit-online-free_141f.jpg" alt="Kiran" />
            </div>
            <h4 class="username">
              To: Kiran üíñ<span class="underline"></span>
            </h4>

            <h3>Happy Birthday</h3>
            <p>From your office Brother üíê</p>
            <div class="imageCute">
              <img src="images/love.png" alt="love" />
            </div>
          </div>
          <div class="card2">
            <div class="card2-content">
              <h3>To Kiran!</h3>
              <h2>
                Happy Birthday, Kiran! ü•≥üéÇ
                You light up our office with your kindness, calm strength, and that smile that makes long days feel lighter. Wishing you a year full of growth, good health, and moments that make your heart happy. Keep shining the way you do ‚Äî we‚Äôre lucky to have you. üíñ
              </h2>

              <div class="imageCute2">
                <img src="images/heart.png" alt="heart" />
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script>
    // Personalize date to tomorrow
    (function(){
      const months = ["January","February","March","April","May","June","July","August","September","October","November","December"];
      const d = new Date();
      d.setDate(d.getDate() + 1);
      window.KIRAN_DATE = `${d.getDate()} ${months[d.getMonth()]} ${d.getFullYear()}`;
    })();

    let datetxt = window.KIRAN_DATE;
    let datatxtletter =
      "Dear Kiran, you make work feel warmer and life feel kinder. May your new year be filled with peace, success, and the little joys that last. Happy Birthday! üíê";
    let titleLetter = "To Kiran";
    let charArrDate = datetxt.split("");
    let charArrDateLetter = datatxtletter.split("");
    let charArrTitle = titleLetter.split("");
    let currentIndex = 0;
    let currentIndexLetter = 0;
    let currentIndexTitle = 0;
    let date__of__birth = document.querySelector(".date__of__birth span");
    let text__letter = document.querySelector(".text__letter p");
    setTimeout(function () {
      timeDatetxt = setInterval(function () {
        if (currentIndex < charArrDate.length) {
          date__of__birth.textContent += charArrDate[currentIndex];
          currentIndex++;
        } else {
          let i = document.createElement("i");
          i.className = "fa-solid fa-star";
          document.querySelector(".date__of__birth").prepend(i);
          document
            .querySelector(".date__of__birth")
            .appendChild(i.cloneNode(true));
          clearInterval(timeDatetxt);
        }
      }, 100);
    }, 3000);

    var intervalContent;
    var intervalTitle;
    $("#btn__letter").on("click", function () {
      document.querySelector(".mail").click();
      startConfettiBurst();
      tryPlayMusic();
    });

    let mailBox = document.querySelector(".mail");
    let boxmail = document.querySelector(".boxMail");
    var close = document.querySelector(".fa-xmark");
    mailBox.onclick = function () {
      mailBox.classList.toggle("active");
      boxmail.classList.add("active");
    };

    close.addEventListener("click", function () {
      boxmail.classList.remove("active");
    });

    // Set chosen profile image consistently
    (function(){
      const url = 'https://namewishes.com/images/styles/happy-birthday-girls-cake-with-name-and-photo-edit-online-free_141f.jpg';
      const profile = document.getElementById('profileImage');
      const modalImg = document.getElementById('modalUserImg');
      if (profile) profile.src = url;
      if (modalImg) modalImg.src = url;
    })();

    // Confetti generator
    const confettiContainer = document.getElementById('confetti');
    function createConfettiPiece(index){
      const el = document.createElement('span');
      el.className = 'confetti';
      const size = Math.floor(Math.random()*6)+6;
      el.style.width = size + 'px';
      el.style.height = size + 'px';
      el.style.left = Math.random()*100 + '%';
      const delay = Math.random()*3;
      const duration = 5 + Math.random()*5;
      el.style.animationDelay = delay + 's';
      el.style.animationDuration = duration + 's';
      const colors = ['#FF7882','#ffd166','#06d6a0','#118ab2','#ef476f','#8338ec'];
      el.style.backgroundColor = colors[index % colors.length];
      confettiContainer.appendChild(el);
    }
    function ensureConfettiBase(){
      if (!confettiContainer.dataset.initialized){
        for (let i=0;i<120;i++){ createConfettiPiece(i); }
        confettiContainer.dataset.initialized = 'true';
      }
    }
    function startConfettiBurst(){
      ensureConfettiBase();
      confettiContainer.classList.add('active');
      setTimeout(()=> confettiContainer.classList.remove('active'), 7000);
    }

    // Background music toggle
    const audio = document.getElementById('bgm');
    const audioToggle = document.getElementById('audioToggle');
    function updateAudioButton(){
      const span = audioToggle.querySelector('span');
      if (audio.paused){ span.textContent = 'Play Music'; audioToggle.classList.remove('playing'); }
      else { span.textContent = 'Pause Music'; audioToggle.classList.add('playing'); }
    }
    function tryPlayMusic(){
      if (audio.paused){ audio.play().then(updateAudioButton).catch(()=>{}); }
    }
    audioToggle.addEventListener('click', function(){
      if (audio.paused){ audio.play().then(updateAudioButton).catch(()=>{}); }
      else { audio.pause(); updateAudioButton(); }
    });
    // Pulse the CTA button subtly
    document.getElementById('btn__letter').classList.add('btn-pulse');
    // Attempt to auto-play on load and sync toggle state
    window.addEventListener('DOMContentLoaded', function(){
      tryPlayMusic();
      updateAudioButton();
    });
  </script>
</html>
